<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezerwacja lotów - Vistula Airlines</title>
    <style>
        :root {
            --primary-color: #006994;
            --secondary-color: #5F9EA0;
            --accent-color: #B0E0E6;
            --text-color: #333;
            --light-gray: #f5f5f5;
            --border-color: #ddd;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            background-color: var(--light-gray);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .search-box, .results-box {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .search-title, .results-title {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        input, select, .custom-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
            cursor: pointer;
            background-color: white;
        }
        
        .row {
            display: flex;
            gap: 20px;
        }
        
        .col {
            flex: 1;
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-block;
            text-align: center;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: #005580;
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        /* Style dla kalendarza */
        .custom-datepicker {
            position: relative;
        }
        
        .datepicker-container {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 300px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 100;
            padding: 15px;
        }
        
        .datepicker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .datepicker-nav {
            display: flex;
            gap: 10px;
        }
        
        .datepicker-nav-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        
        .datepicker-month-year {
            font-weight: bold;
        }
        
        .datepicker-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .datepicker-day-header {
            text-align: center;
            font-weight: bold;
            padding: 5px;
            color: var(--primary-color);
        }
        
        .datepicker-day {
            text-align: center;
            padding: 8px;
            cursor: pointer;
            border-radius: 4px;
        }
        
        .datepicker-day:hover {
            background-color: var(--accent-color);
        }
        
        .datepicker-day.disabled {
            color: var(--border-color);
            cursor: not-allowed;
        }
        
        .datepicker-day.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Ulepszony wybór klasy podróży */
        .travel-class-container {
            position: relative;
        }
        
        .travel-class-modal {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 100;
            padding: 20px;
        }
        
        .class-option {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .class-option:hover {
            background-color: var(--accent-color);
        }
        
        .class-option.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        .class-icon {
            margin-right: 15px;
            font-size: 24px;
        }
        
        .class-info {
            flex: 1;
        }
        
        .class-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .class-desc {
            font-size: 14px;
            color: inherit;
            opacity: 0.8;
        }
        
        /* Responsywność */
        @media (max-width: 768px) {
            .row {
                flex-direction: column;
            }
            
            .datepicker-container {
                width: 100%;
                left: 0;
                right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Formularz wyszukiwania -->
        <div id="searchSection" class="search-box">
            <h2 class="search-title">Wyszukaj lot</h2>
            <form id="searchForm">
                <!-- Typ podróży -->
                <div class="trip-type">
                    <div class="trip-type-option active" data-type="roundtrip">Lot w obie strony</div>
                    <div class="trip-type-option" data-type="oneway">Lot w jedną stronę</div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="from">Skąd</label>
                            <div class="custom-input" id="fromInput">Wybierz lotnisko</div>
                            <input type="hidden" id="from" name="from" value="">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="to">Dokąd</label>
                            <div class="custom-input" id="toInput">Wybierz lotnisko</div>
                            <input type="hidden" id="to" name="to" value="">
                        </div>
                    </div>
                </div>
                
                <!-- Własny kalendarz -->
                <div class="row">
                    <div class="col">
                        <div class="form-group custom-datepicker">
                            <label for="departure">Data wylotu</label>
                            <div class="custom-input" id="departureInput">Wybierz datę</div>
                            <input type="hidden" id="departure" name="departure" required>
                            
                            <div class="datepicker-container" id="departureDatepicker">
                                <div class="datepicker-header">
                                    <div class="datepicker-month-year">Lipiec 2023</div>
                                    <div class="datepicker-nav">
                                        <button class="datepicker-nav-btn" id="departurePrevMonth">&lt;</button>
                                        <button class="datepicker-nav-btn" id="departureNextMonth">&gt;</button>
                                    </div>
                                </div>
                                <div class="datepicker-grid" id="departureCalendar">
                                    <!-- Dni kalendarza będą generowane przez JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col" id="returnDateCol">
                        <div class="form-group custom-datepicker">
                            <label for="return">Data powrotu</label>
                            <div class="custom-input" id="returnInput">Wybierz datę</div>
                            <input type="hidden" id="return" name="return">
                            
                            <div class="datepicker-container" id="returnDatepicker">
                                <div class="datepicker-header">
                                    <div class="datepicker-month-year">Lipiec 2023</div>
                                    <div class="datepicker-nav">
                                        <button class="datepicker-nav-btn" id="returnPrevMonth">&lt;</button>
                                        <button class="datepicker-nav-btn" id="returnNextMonth">&gt;</button>
                                    </div>
                                </div>
                                <div class="datepicker-grid" id="returnCalendar">
                                    <!-- Dni kalendarza będą generowane przez JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ulepszony wybór klasy podróży -->
                <div class="row">
                    <div class="col">
                        <div class="form-group travel-class-container">
                            <label for="travelClass">Klasa podróży</label>
                            <div class="custom-input" id="travelClassInput">Wybierz klasę</div>
                            <input type="hidden" id="travelClass" name="travelClass" value="">
                            
                            <div class="travel-class-modal" id="travelClassModal">
                                <div class="class-option" data-class="economy">
                                    <div class="class-icon">✈️</div>
                                    <div class="class-info">
                                        <div class="class-name">Economy</div>
                                        <div class="class-desc">Standardowa klasa ekonomiczna</div>
                                    </div>
                                </div>
                                <div class="class-option" data-class="premium">
                                    <div class="class-icon">🛋️</div>
                                    <div class="class-info">
                                        <div class="class-name">Premium Economy</div>
                                        <div class="class-desc">Więcej miejsca i udogodnień</div>
                                    </div>
                                </div>
                                <div class="class-option" data-class="business">
                                    <div class="class-icon">💼</div>
                                    <div class="class-info">
                                        <div class="class-name">Business</div>
                                        <div class="class-desc">Premium komfort i usługi</div>
                                    </div>
                                </div>
                                <div class="class-option" data-class="first">
                                    <div class="class-icon">⭐</div>
                                    <div class="class-info">
                                        <div class="class-name">First Class</div>
                                        <div class="class-desc">Luksus na najwyższym poziomie</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-block">Szukaj lotów</button>
            </form>
        </div>
        
        <!-- Wyniki wyszukiwania -->
        <div id="resultsSection" class="results-box hidden">
            <h2 class="results-title">Dostępne loty</h2>
            <div id="flightsContainer"></div>
            <a href="#" class="btn btn-block" id="backButton">Powrót do wyszukiwania</a>
        </div>
    </div>

    <script>
        // Baza danych lotnisk
        const airports = {
            "Polska": [
                { name: "Warszawa - Okęcie", code: "WAW", city: "Warszawa" },
                { name: "Gdańsk - Rębiechowo", code: "GDN", city: "Gdańsk" }
            ]
        };

        // Baza danych lotów
        const flightDatabase = {
            "Warszawa (WAW)-Gdańsk (GDN)": [
                { number: "VA701", departure: "07:00", arrival: "08:00", price: "179 PLN" },
                { number: "VA703", departure: "15:20", arrival: "16:20", price: "199 PLN" },
                { number: "VA705", departure: "19:25", arrival: "20:25", price: "219 PLN" },
                { number: "VA707", departure: "22:55", arrival: "23:55", price: "189 PLN" }
            ],
            "Gdańsk (GDN)-Warszawa (WAW)": [
                { number: "VA702", departure: "06:00", arrival: "07:00", price: "169 PLN" },
                { number: "VA704", departure: "08:45", arrival: "09:45", price: "179 PLN" },
                { number: "VA706", departure: "17:05", arrival: "18:05", price: "199 PLN" },
                { number: "VA708", departure: "21:10", arrival: "22:10", price: "189 PLN" }
            ]
        };

        // Funkcje pomocnicze
        function normalizeAirport(airport) {
            const match = airport.match(/(.+?)\s*-\s*.+?\s*\(([A-Z]{3})\)/);
            return match ? `${match[1]} (${match[2]})` : airport;
        }

        function formatDate(date) {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('pl-PL', options);
        }

        // Kalendarz - funkcje
        function generateCalendar(year, month, calendarId, selectedDate = null) {
            const calendar = document.getElementById(calendarId);
            calendar.innerHTML = '';
            
            // Nagłówki dni tygodnia
            const days = ['Nd', 'Pn', 'Wt', 'Śr', 'Cz', 'Pt', 'Sb'];
            days.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'datepicker-day-header';
                dayElement.textContent = day;
                calendar.appendChild(dayElement);
            });
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDay = firstDay.getDay();
            
            // Puste miejsca przed pierwszym dniem miesiąca
            for (let i = 0; i < startingDay; i++) {
                const emptyDay = document.createElement('div');
                calendar.appendChild(emptyDay);
            }
            
            // Dni miesiąca
            const today = new Date();
            const maxDate = new Date();
            maxDate.setFullYear(today.getFullYear() + 1); // Rok do przodu
            
            for (let day = 1; day <= daysInMonth; day++) {
                const currentDate = new Date(year, month, day);
                const dayElement = document.createElement('div');
                dayElement.className = 'datepicker-day';
                dayElement.textContent = day;
                
                // Sprawdź czy data jest w przeszłości lub po maksymalnej dacie
                if (currentDate < today || currentDate > maxDate) {
                    dayElement.classList.add('disabled');
                } else {
                    dayElement.addEventListener('click', function() {
                        selectDate(currentDate, calendarId.includes('departure') ? 'departure' : 'return');
                    });
                }
                
                // Zaznacz wybraną datę
                if (selectedDate && currentDate.getDate() === selectedDate.getDate() && 
                    currentDate.getMonth() === selectedDate.getMonth() && 
                    currentDate.getFullYear() === selectedDate.getFullYear()) {
                    dayElement.classList.add('selected');
                }
                
                calendar.appendChild(dayElement);
            }
            
            // Aktualizuj nagłówek miesiąca i roku
            const monthNames = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 
                               'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'];
            const header = document.querySelector(`#${calendarId.replace('Calendar', 'Datepicker')} .datepicker-month-year`);
            header.textContent = `${monthNames[month]} ${year}`;
        }

        function selectDate(date, type) {
            const inputElement = document.getElementById(`${type}Input`);
            const hiddenInput = document.getElementById(type);
            
            inputElement.textContent = formatDate(date);
            hiddenInput.value = date.toISOString().split('T')[0];
            
            // Ukryj kalendarz
            document.getElementById(`${type}Datepicker`).style.display = 'none';
            
            // Jeśli to data wylotu i jest wybrany lot w obie strony, ustaw minimalną datę powrotu
            if (type === 'departure' && document.querySelector('.trip-type-option.active').dataset.type === 'roundtrip') {
                const returnInput = document.getElementById('return');
                if (returnInput.value && new Date(returnInput.value) < date) {
                    returnInput.value = '';
                    document.getElementById('returnInput').textContent = 'Wybierz datę';
                }
                document.getElementById('return').min = date.toISOString().split('T')[0];
            }
        }

        // Inicjalizacja kalendarza
        function initDatepickers() {
            const today = new Date();
            const currentYear = today.getFullYear();
            const currentMonth = today.getMonth();
            
            // Inicjalizacja kalendarzy
            generateCalendar(currentYear, currentMonth, 'departureCalendar', today);
            generateCalendar(currentYear, currentMonth, 'returnCalendar');
            
            // Obsługa nawigacji miesiącami
            document.getElementById('departurePrevMonth').addEventListener('click', function() {
                const header = document.querySelector('#departureDatepicker .datepicker-month-year').textContent;
                const [month, year] = header.split(' ');
                const monthIndex = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 
                                   'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'].indexOf(month);
                const currentYear = parseInt(year);
                
                let newMonth = monthIndex - 1;
                let newYear = currentYear;
                
                if (newMonth < 0) {
                    newMonth = 11;
                    newYear--;
                }
                
                generateCalendar(newYear, newMonth, 'departureCalendar');
            });
            
            document.getElementById('departureNextMonth').addEventListener('click', function() {
                const header = document.querySelector('#departureDatepicker .datepicker-month-year').textContent;
                const [month, year] = header.split(' ');
                const monthIndex = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 
                                   'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'].indexOf(month);
                const currentYear = parseInt(year);
                
                let newMonth = monthIndex + 1;
                let newYear = currentYear;
                
                if (newMonth > 11) {
                    newMonth = 0;
                    newYear++;
                }
                
                generateCalendar(newYear, newMonth, 'departureCalendar');
            });
            
            // Analogiczna obsługa dla kalendarza powrotu
            document.getElementById('returnPrevMonth').addEventListener('click', function() {
                const header = document.querySelector('#returnDatepicker .datepicker-month-year').textContent;
                const [month, year] = header.split(' ');
                const monthIndex = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 
                                   'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'].indexOf(month);
                const currentYear = parseInt(year);
                
                let newMonth = monthIndex - 1;
                let newYear = currentYear;
                
                if (newMonth < 0) {
                    newMonth = 11;
                    newYear--;
                }
                
                generateCalendar(newYear, newMonth, 'returnCalendar');
            });
            
            document.getElementById('returnNextMonth').addEventListener('click', function() {
                const header = document.querySelector('#returnDatepicker .datepicker-month-year').textContent;
                const [month, year] = header.split(' ');
                const monthIndex = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 
                                   'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'].indexOf(month);
                const currentYear = parseInt(year);
                
                let newMonth = monthIndex + 1;
                let newYear = currentYear;
                
                if (newMonth > 11) {
                    newMonth = 0;
                    newYear++;
                }
                
                generateCalendar(newYear, newMonth, 'returnCalendar');
            });
            
            // Pokazuj/ukrywaj kalendarz po kliknięciu w input
            document.getElementById('departureInput').addEventListener('click', function() {
                document.getElementById('departureDatepicker').style.display = 'block';
                document.getElementById('returnDatepicker').style.display = 'none';
            });
            
            document.getElementById('returnInput').addEventListener('click', function() {
                document.getElementById('returnDatepicker').style.display = 'block';
                document.getElementById('departureDatepicker').style.display = 'none';
            });
            
            // Ukryj kalendarz po kliknięciu poza nim
            window.addEventListener('click', function(event) {
                if (!event.target.closest('.custom-datepicker')) {
                    document.getElementById('departureDatepicker').style.display = 'none';
                    document.getElementById('returnDatepicker').style.display = 'none';
                }
            });
        }

        // Inicjalizacja wyboru klasy podróży
        function initTravelClass() {
            const classOptions = document.querySelectorAll('.class-option');
            
            classOptions.forEach(option => {
                option.addEventListener('click', function() {
                    classOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const classType = this.dataset.class;
                    const classNames = {
                        'economy': 'Economy',
                        'premium': 'Premium Economy',
                        'business': 'Business',
                        'first': 'First Class'
                    };
                    
                    document.getElementById('travelClassInput').textContent = classNames[classType];
                    document.getElementById('travelClass').value = classType;
                    document.getElementById('travelClassModal').style.display = 'none';
                });
            });
            
            // Pokazuj/ukrywaj modal klasy podróży
            document.getElementById('travelClassInput').addEventListener('click', function() {
                document.getElementById('travelClassModal').style.display = 'block';
            });
            
            // Ukryj modal po kliknięciu poza nim
            window.addEventListener('click', function(event) {
                if (!event.target.closest('.travel-class-container')) {
                    document.getElementById('travelClassModal').style.display = 'none';
                }
            });
        }

        // Główna inicjalizacja
        document.addEventListener('DOMContentLoaded', function() {
            initDatepickers();
            initTravelClass();
            
            // Ustaw domyślną datę wylotu na dzisiaj
            const today = new Date();
            selectDate(today, 'departure');
            
            // Obsługa typu podróży
            document.querySelectorAll('.trip-type-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.trip-type-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (this.dataset.type === 'oneway') {
                        document.getElementById('returnDateCol').style.display = 'none';
                    } else {
                        document.getElementById('returnDateCol').style.display = 'block';
                    }
                });
            });
            
            // Pozostała logika formularza...
        });
    </script>
</body>
</html>